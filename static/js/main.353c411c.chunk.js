(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{12:function(e,t,a){e.exports={loader:"Loader_loader__1Gc8r"}},18:function(e,t,a){},19:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(0),r=a.n(n),o=a(4),s=a.n(o),i=(a(18),a(3)),l=(a(19),a(8)),u=a(10);var j={fetchImages:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=19012296-41da2131aa4097137b6521ff0&image_type=all&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.rejected(new Error("No response from server"))}))}},m=a(7),b=a.n(m),d=(a(11),document.querySelector("#modal-root"));function f(e){var t=e.onClose,a=e.alt,r=e.src,s=Object(n.useState)(!1),l=Object(i.a)(s,2),u=l[0],j=l[1],m=function(){j((function(e){return!e}))};Object(n.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return m(),window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return Object(o.createPortal)(Object(c.jsx)("div",{className:"Overlay",onClick:function(e){var a=e.target;e.currentTarget===a&&t()},children:Object(c.jsxs)("div",{className:"Modal",children:[Object(c.jsx)("img",{src:r,alt:a,onLoad:m}),u&&Object(c.jsx)(b.a,{type:"TailSpin",color:"#00BFFF",height:120,width:120})]})}),d)}function O(e){var t=e.largeImageUrl,a=e.src,r=e.alt,o=Object(n.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1],j=function(){u(!l)};return Object(c.jsxs)("li",{className:"ImageGalleryItem",children:[Object(c.jsx)("img",{src:a,alt:r,onClick:j,className:"ImageGalleryItem-image"}),l&&Object(c.jsx)(f,{onClose:j,src:t,alt:r})]})}var h=function(e){var t=e.images;return Object(c.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(c.jsx)(O,{src:e.webformatURL,alt:e.tags,largeImageUrl:e.largeImageURL},e.id)}))})},g=a(12),p=a.n(g);function x(){return Object(c.jsx)("div",{className:p.a.loader,children:Object(c.jsx)(b.a,{type:"TailSpin",color:"#00BFFF",height:120,width:120})})}function v(e){var t=e.onClick;return Object(c.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})}var S="idle",w="pending",y="resolved",N="rejected";var I=function(e){var t=e.imageName,a=e.images,r=e.page,o=e.setImages,s=e.setPage,l=Object(n.useState)({}),m=Object(i.a)(l,2),b=m[0],d=m[1],f=Object(n.useState)(S),O=Object(i.a)(f,2),g=O[0],p=O[1],I=Object(n.useState)(!0),F=Object(i.a)(I,2),k=(F[0],F[1]);return Object(n.useEffect)((function(){t&&(p(w),j.fetchImages(t,r).then((function(e){if(!(e.total>0))return Promise.reject(new Error('\n                Could not find pictures for the request : "'.concat(t,'"')));o((function(t){return[].concat(Object(u.a)(t),Object(u.a)(e.hits))})),p(y),e.total<1?k(!1):k(!0)})).catch((function(e){d(e),p(N)})))}),[t,r,o]),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),g===S?Object(c.jsx)("p",{className:"InfoText",children:"Please enter some search keyword"}):g===w?Object(c.jsx)(x,{}):g===N?Object(c.jsx)("p",{className:"ErrorText",children:b.message}):g===y?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(h,{images:a}),Object(c.jsx)(v,{onClick:function(){return s(r+1)}})]}):void 0};function F(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(i.a)(a,2),o=r[0],s=r[1];return Object(c.jsx)("header",{className:"Searchbar",children:Object(c.jsxs)("form",{className:"SearchForm",onSubmit:function(e){if(e.preventDefault(),""===o.trim())return l.b.info("Please enter something");t(o),s("")},children:[Object(c.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(c.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(c.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){s(e.currentTarget.value.toLowerCase())}})]})})}function k(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),s=Object(i.a)(o,2),u=s[0],j=s[1],m=Object(n.useState)(1),b=Object(i.a)(m,2),d=b[0],f=b[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(F,{onSubmit:function(e){r(e),j([]),f(1)}}),Object(c.jsx)(I,{imageName:a,images:u,page:d,setImages:j,setPage:f}),Object(c.jsx)(l.a,{autoClose:3e3})]})}a(41);s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.353c411c.chunk.js.map